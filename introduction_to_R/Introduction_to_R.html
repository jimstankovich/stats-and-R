<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="">
<meta name="dcterms.date" content="2024-06-23">

<title>Data analysis using R: an introduction</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Introduction_to_R_files/libs/clipboard/clipboard.min.js"></script>
<script src="Introduction_to_R_files/libs/quarto-html/quarto.js"></script>
<script src="Introduction_to_R_files/libs/quarto-html/popper.min.js"></script>
<script src="Introduction_to_R_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Introduction_to_R_files/libs/quarto-html/anchor.min.js"></script>
<link href="Introduction_to_R_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Introduction_to_R_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Introduction_to_R_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Introduction_to_R_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Introduction_to_R_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="Introduction_to_R_files/libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="Introduction_to_R_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="Introduction_to_R_files/libs/plotly-binding-4.10.4/plotly.js"></script>
<script src="Introduction_to_R_files/libs/typedarray-0.1/typedarray.min.js"></script>
<script src="Introduction_to_R_files/libs/jquery-3.5.1/jquery.min.js"></script>
<link href="Introduction_to_R_files/libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="Introduction_to_R_files/libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="Introduction_to_R_files/libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="Introduction_to_R_files/libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


<link rel="stylesheet" href="styles.css">
</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul class="collapse">
  <li><a href="#about-these-notes" id="toc-about-these-notes" class="nav-link active" data-scroll-target="#about-these-notes"><span class="header-section-number">1</span> About these notes</a></li>
  <li><a href="#introduction-to-r-and-rstudio" id="toc-introduction-to-r-and-rstudio" class="nav-link" data-scroll-target="#introduction-to-r-and-rstudio"><span class="header-section-number">2</span> Introduction to R and RStudio</a>
  <ul class="collapse">
  <li><a href="#why-use-r-and-r-studio" id="toc-why-use-r-and-r-studio" class="nav-link" data-scroll-target="#why-use-r-and-r-studio"><span class="header-section-number">2.1</span> Why use R and R studio?</a></li>
  <li><a href="#overview" id="toc-overview" class="nav-link" data-scroll-target="#overview"><span class="header-section-number">2.2</span> Overview</a></li>
  <li><a href="#workflow-within-rstudio" id="toc-workflow-within-rstudio" class="nav-link" data-scroll-target="#workflow-within-rstudio"><span class="header-section-number">2.3</span> Workflow within RStudio</a></li>
  <li><a href="#introduction-to-r" id="toc-introduction-to-r" class="nav-link" data-scroll-target="#introduction-to-r"><span class="header-section-number">2.4</span> Introduction to R</a></li>
  <li><a href="#using-r-as-a-calculator" id="toc-using-r-as-a-calculator" class="nav-link" data-scroll-target="#using-r-as-a-calculator"><span class="header-section-number">2.5</span> Using R as a calculator</a></li>
  <li><a href="#functions" id="toc-functions" class="nav-link" data-scroll-target="#functions"><span class="header-section-number">2.6</span> Functions</a></li>
  <li><a href="#objects-giving-names-to-pieces-of-information" id="toc-objects-giving-names-to-pieces-of-information" class="nav-link" data-scroll-target="#objects-giving-names-to-pieces-of-information"><span class="header-section-number">2.7</span> Objects: giving names to pieces of information</a></li>
  <li><a href="#vectors" id="toc-vectors" class="nav-link" data-scroll-target="#vectors"><span class="header-section-number">2.8</span> Vectors</a></li>
  <li><a href="#joining-vectors-of-the-same-length-to-make-a-data.frame" id="toc-joining-vectors-of-the-same-length-to-make-a-data.frame" class="nav-link" data-scroll-target="#joining-vectors-of-the-same-length-to-make-a-data.frame"><span class="header-section-number">2.9</span> Joining vectors of the same length to make a <code>data.frame</code></a></li>
  <li><a href="#checking-whether-statements-are-true-or-false" id="toc-checking-whether-statements-are-true-or-false" class="nav-link" data-scroll-target="#checking-whether-statements-are-true-or-false"><span class="header-section-number">2.10</span> Checking whether statements are TRUE or FALSE</a></li>
  <li><a href="#r-packages" id="toc-r-packages" class="nav-link" data-scroll-target="#r-packages"><span class="header-section-number">2.11</span> R packages</a></li>
  <li><a href="#loading-data-with-the-readr-package" id="toc-loading-data-with-the-readr-package" class="nav-link" data-scroll-target="#loading-data-with-the-readr-package"><span class="header-section-number">2.12</span> Loading data with the <code>readr</code> package</a></li>
  <li><a href="#using-the-dplyr-package-to-look-at-the-asean_data" id="toc-using-the-dplyr-package-to-look-at-the-asean_data" class="nav-link" data-scroll-target="#using-the-dplyr-package-to-look-at-the-asean_data"><span class="header-section-number">2.13</span> Using the dplyr package to look at the <code>asean_data</code></a></li>
  <li><a href="#plotting-data-with-the-ggplot2-package" id="toc-plotting-data-with-the-ggplot2-package" class="nav-link" data-scroll-target="#plotting-data-with-the-ggplot2-package"><span class="header-section-number">2.14</span> Plotting data with the <code>ggplot2</code> package</a></li>
  <li><a href="#scatterplot-with-different-sized-symbols" id="toc-scatterplot-with-different-sized-symbols" class="nav-link" data-scroll-target="#scatterplot-with-different-sized-symbols"><span class="header-section-number">2.15</span> Scatterplot with different sized symbols</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data analysis using R: an introduction</h1>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">June 23, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="about-these-notes" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> About these notes</h1>
<p>R is a programming language used by many researchers to analyse data. The aims of these notes are:</p>
<ul>
<li>to give you an understanding of why R is useful for data analysis, and</li>
<li>to encourage you to use R for your research.</li>
</ul>
<p>In these notes we look at some data on countries around the world based on free material from <a href="https://www.gapminder.org/data/">GAPMINDER.ORG</a>, CC-BY LICENSE.</p>
<p>Some parts of these notes have been taken from parts of a longer course called <a href="https://swcarpentry.github.io/r-novice-gapminder/">R for Reproducible Scientific Analysis</a>, and I have made some modifications. The course <em>R for Reproducible Scientific Analysis</em> is Copyright (c) <a href="https://carpentries.org/">The Carpentries</a>. Here is the <a href="https://creativecommons.org/licenses/by/4.0/">license</a> governing the use of the course.</p>
<p>Half-way through writing these notes, I discovered an excellent online book, called <a href="https://bookdown.org/daniel_dauber_io/r4np_book/">R for Non-Programmers: A Guide for Social Scientists</a>. If I had started the notes sooner, I would have copied many more good ideas from this book as well.</p>
<p>To work through the exercises in these notes, you need two pieces of software installed on your computer:</p>
<ol type="1">
<li><span style="color: #D95F02;"><strong>R</strong></span>, available <a href="https://www.r-project.org/">here</a>.</li>
<li><span style="color: #D95F02;"><strong>RStudio</strong></span>, available <a href="https://posit.co/download/rstudio-desktop/#download">here</a>.</li>
</ol>
<p>Please make sure that you have the latest versions of these installed. If you have any problems installing these, take a look at the instructions in Chapter 3 of <a href="https://bookdown.org/daniel_dauber_io/r4np_book/setting-up-r-and-rstudio.html">R for Non-Programmers</a>.</p>
</section>
<section id="introduction-to-r-and-rstudio" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Introduction to R and RStudio</h1>
<section id="why-use-r-and-r-studio" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="why-use-r-and-r-studio"><span class="header-section-number">2.1</span> Why use R and R studio?</h2>
<p>Research is a multi-step process: once you’ve designed an experiment and collected data, the real fun begins with analysis! In this section, we look at some of the fundamentals of the R language as well as some best practices for organizing code for research projects that will make your life easier.</p>
<p>Although we could use a spreadsheet in Microsoft Excel or Google sheets to analyze our data, these tools are limited in their flexibility and accessibility. Critically, they also are difficult to share steps which explore and change the raw data, which is key to <a href="https://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1003285">“reproducible” research</a>.</p>
<p>Therefore, these notes will help you begin exploring your data using R and RStudio. The R program is available for Windows, Mac, and Linux operating systems, and is a freely-available where you downloaded it above. To run R, all you need is the R program.</p>
<p>However, to make using R easier, we will use the program RStudio, which we also downloaded above. RStudio is a free, open-source, Integrated Development Environment (IDE). It provides a built-in editor, works on all platforms (including on servers) and provides many advantages such as integration with version control and project management.</p>
</section>
<section id="overview" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="overview"><span class="header-section-number">2.2</span> Overview</h2>
<p>We will begin with raw data, perform exploratory analyses, and learn how to plot results graphically. This example starts with data from gapminder.org, containing yearly statistics for many countries through time. Can you read the data into R? Can you plot the population for Indonesia? Can you calculate the average income for ASEAN countries? By the end of these lessons you will be able to do things like plot the populations for all of these countries in under a minute!</p>
<p><strong>Basic layout</strong></p>
<p>When you first open RStudio, you will see three panels:</p>
<ul>
<li>The interactive R console/Terminal (entire left)</li>
<li>Environment/History/Connections (tabbed in upper right)</li>
<li>Files/Plots/Packages/Help/Viewer (tabbed in lower right)</li>
</ul>
<p><img src="images/RStudio_screenshot1.png" class="img-fluid"></p>
<p>Once you open files, such as R scripts, an editor panel will also open in the top left.</p>
<p><img src="images/RStudio_screenshot2.png" class="img-fluid"></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
R Scripts
</div>
</div>
<div class="callout-body-container callout-body">
<p>Any commands that you write in the R console can be saved to a file to be re-run again. Files containing R code to be ran in this way are called R scripts. R scripts have <code>.R</code> at the ends of their names to let you know what they are.</p>
</div>
</div>
</section>
<section id="workflow-within-rstudio" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="workflow-within-rstudio"><span class="header-section-number">2.3</span> Workflow within RStudio</h2>
<p>There are two main ways you can work in RStudio:</p>
<ol type="1">
<li><p>Test and play within the interactive R console then copy code into a .R file to run later.</p>
<ul>
<li>This works well when doing small tests and initially starting off.</li>
<li>It quickly becomes laborious</li>
</ul></li>
<li><p>Start writing in a .R file and use RStudio’s short cut keys for the Run command to push the current line, selected lines or modified lines to the interactive R console.</p>
<ul>
<li>This is a great way to start; all your code is saved for later</li>
<li>You will be able to run the file you create from within RStudio or R’s <code>source</code> function.</li>
</ul></li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip: Running Segments of Your Code
</div>
</div>
<div class="callout-body-container callout-body">
<p>RStudio offers you several ways to run code from within the editor window. To run the current line, you can</p>
<pre><code>1. click on the Run button above the editor panel, or
2. select “Run Lines” from the “Code” menu, or
3. hit Ctrl+Return in Windows or Linux or ⌘+Return on OS X. </code></pre>
<p>To run several lines of code (instead of just one), select the lines first and then use one of these 3 methods.</p>
</div>
</div>
</section>
<section id="introduction-to-r" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="introduction-to-r"><span class="header-section-number">2.4</span> Introduction to R</h2>
<p>Much of your time in R will be spent in the R interactive console. This is where you will run all of your code, and can be a useful environment to try out ideas before adding them to an R script file.</p>
<p>The first thing you will see in the R interactive session is a bunch of information, followed by a “&gt;” and a blinking cursor. Here you type in commands, R tries to execute them, and then returns a result.</p>
</section>
<section id="using-r-as-a-calculator" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="using-r-as-a-calculator"><span class="header-section-number">2.5</span> Using R as a calculator</h2>
<p>This is the simplest thing you can do with R.</p>
<p>If you type</p>
<p><code>1 + 100</code></p>
<p>in the console and press return, it shows the answer (101) with <code>[1]</code> in front of it:</p>
<p><code>[1] 101</code></p>
<p>We’ll discuss the <code>[1]</code> later.</p>
<p>If you type an incomplete command, like</p>
<p><code>3 -</code> (instead of <code>3 - 2</code> )</p>
<p>and press return, R will show a</p>
<p><code>+</code></p>
<p>to indicate that it is expecting something else. If you want to cancel a command you can hit Esc and RStudio will give you back the <code>&gt;</code> prompt.</p>
<p>From now on in these notes, we’ll show R commands and the results they give like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">+</span> <span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>[1] 101</code></pre>
</div>
</div>
<p>with the R commands in a grey box and the results in a pale purple box. You can copy the R commands by hovering on the right edge of the grey box and clicking on the clipboard. Don’t just read the commands… copy and paste them into RStudio, run them for yourself, try changing them, and see what happens!</p>
<p>When using R was a calculator, the order of operations is the same as you learned in school. Things are executed in this order:</p>
<ul>
<li>Brackets <code>(</code>, <code>)</code></li>
<li>Raise one number to the power of another number: <code>^</code> or <code>**</code> (can use either symbol)</li>
<li>Multiply <code>*</code> and divide <code>/</code></li>
<li>Add <code>+</code> and subtract <code>-</code></li>
</ul>
<p>For example, compare the difference between</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="sc">+</span> <span class="dv">5</span> <span class="sc">*</span> <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>[1] 13</code></pre>
</div>
</div>
<p>and</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>(<span class="dv">3</span> <span class="sc">+</span> <span class="dv">5</span>) <span class="sc">*</span> <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>[1] 16</code></pre>
</div>
</div>
<p>Large and small numbers, for example the population of China in 2022 (1.43 billion), are written in scientific notation:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1430000000</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>[1] 1.43e+09</code></pre>
</div>
</div>
<p><code>e+09</code> is another way of writing for “multiplied by 10 to the power 9” (or <code>*10^9</code>), and 10 to the power 9 is one billion</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fl">1.43</span> <span class="sc">*</span> <span class="dv">10</span><span class="sc">^</span><span class="dv">9</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>[1] 1.43e+09</code></pre>
</div>
</div>
</section>
<section id="functions" class="level2" data-number="2.6">
<h2 data-number="2.6" class="anchored" data-anchor-id="functions"><span class="header-section-number">2.6</span> Functions</h2>
<p>R can also do other things you can do with a calculator. For example, to calculate the square-root of 36, type</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="dv">36</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>[1] 6</code></pre>
</div>
</div>
<p>The command <code>sqrt</code> is known as a <span style="color: #D95F02;"><strong>function</strong></span>. R has many built in functions: some do maths like <code>sqrt</code>, and some do other things. To call a function, type its name, followed by opening and closing brackets. Some functions take <span style="color: #D95F02;"><strong>arguments</strong></span> as inputs (things typed inside the brackets). For example <code>sqrt</code> takes a single number as an argument (36 in the example above), and calculates its square root.</p>
<p>Some functions don’t take any arguments:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getRversion</span>() <span class="co"># Check what version of R you are using</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>[1] '4.4.1'</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>() <span class="co"># Check which folder any files will be written in if you decide to save something</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>[1] "/Users/jimstankovich/Documents/GitHub/stats-and-R/introduction_to_R"</code></pre>
</div>
</div>
<p>(Here we have added <em>comments</em> to help explain our R commands. Anything on a line after a <code>#</code> is ignored by R, so it is a good place to write comments.)</p>
<p>Other functions take different types of arguments, for example</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="dv">1</span>,<span class="st">" dog"</span>,<span class="st">" and "</span>,<span class="st">"1"</span>,<span class="st">"2"</span>, <span class="st">" cats"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>[1] "1 dog and 12 cats"</code></pre>
</div>
</div>
<p>This example shows that R works with text as well as numbers.</p>
<p>Don’t worry about trying to remember every function in R. You can look them up on Google, or if you can remember the start of the function’s name, type it and RStudio will provide some suggestions for the end of the name. For example, if you type <code>sq</code>, RStudio will list various functions starting with “sq”, including <code>sqrt()</code>.</p>
<p>Typing a ? before the name of a command will open the <em>help page</em> for the command on the bottom right. The help page includes a detailed description of the command and how it works. The bottom of the help page will usually has examples of how to use the command. (This is often the most useful part of the help page!)</p>
</section>
<section id="objects-giving-names-to-pieces-of-information" class="level2" data-number="2.7">
<h2 data-number="2.7" class="anchored" data-anchor-id="objects-giving-names-to-pieces-of-information"><span class="header-section-number">2.7</span> Objects: giving names to pieces of information</h2>
<p>A key concept in R, and in any programming language, is to give names to pieces of data. You can give names to single numbers, a bit like <code>x</code>’s and <code>y</code>’s in algebra you did in high school, or to huge tables of data. Any name (like <code>x</code> or <code>y</code>) with something assigned to it is called an <code>r(em2("object"))</code>.</p>
<p>The <code>-&gt;</code> symbol is used to assign some data to an object. For example, the command</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">9</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>creates an object called <code>x</code>, and sets <code>x</code> equal to 9.</p>
<p>To check what value an object has, just type the name of the object:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>[1] 9</code></pre>
</div>
</div>
<p>Once <code>x</code> has been assigned a value, we can use it for calculations:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>x <span class="sc">+</span> <span class="dv">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>[1] 12</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>[1] 3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>x<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> <span class="dv">2</span><span class="sc">*</span>x <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>[1] 100</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>(x<span class="sc">+</span><span class="dv">1</span>)<span class="sc">^</span><span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>[1] 100</code></pre>
</div>
</div>
<p>You can also assign a new value to <code>x</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">42</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>[1] 42</code></pre>
</div>
</div>
<p>Note that the command <code>x &lt;- 42</code> changes the value of <code>x</code>, but it doesn’t show us what the new value of <code>x</code> is. The <code>x</code> on the line below asks R to show us the value of <code>x</code>.</p>
<p>You can also change the value of <code>x</code> based on what its previous value was:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> x <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>[1] 43</code></pre>
</div>
</div>
<p>To interpret the command <code>x &lt;- x + 1</code>, start on the right. <code>x + 1</code> means take the current value of <code>x</code> (42) and add 1 to it (43). The arrow pointing to the left says: take the new value you calculated on the right (43) and assign it to the thing on the left (<code>x</code>).</p>
<p>If you prefer, you can use longer names for objects that are more informative than <code>x</code>, such as</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>population_of_thailand_2022 <span class="ot">&lt;-</span> <span class="fl">71.7</span> <span class="sc">*</span> <span class="dv">10</span><span class="sc">^</span><span class="dv">6</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>thailandPop22 <span class="ot">&lt;-</span> <span class="fl">71.7</span> <span class="sc">*</span> <span class="dv">10</span><span class="sc">^</span><span class="dv">6</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>These names can only include letters, numbers, <code>_</code>, and <code>.</code>, and names must start with a letter. So the following names are invalid:</p>
<ul>
<li><code>22pop</code> (cannot start with numbers)</li>
<li><code>thailand pop</code> (cannot have spaces)</li>
<li><code>pop-22</code> (cannot have a <code>-</code>)</li>
</ul>
<p>If you use long names, you don’t have to type them in full every time. Once RStudio knows that you have created an object called <code>population_of_thailand_2022</code>, it will suggest the full name after you type the first few characters.</p>
<div class="callout callout-style-simple callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>What are the values of <code>mass</code> and <code>age</code> after the following commands are run?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>mass <span class="ot">&lt;-</span> <span class="fl">47.5</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>age <span class="ot">&lt;-</span> <span class="dv">122</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>mass <span class="ot">&lt;-</span> mass <span class="sc">*</span> <span class="fl">2.3</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>age <span class="ot">&lt;-</span> age <span class="sc">-</span> <span class="dv">20</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click to see the solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>mass <span class="ot">&lt;-</span> <span class="fl">47.5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This gives the object <code>mass</code> a value of 47.5.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>age <span class="ot">&lt;-</span> <span class="dv">122</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This gives the object <code>mass</code> a value of 122.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>mass <span class="ot">&lt;-</span> mass <span class="sc">*</span> <span class="fl">2.3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This takes the existing value of <code>mass</code> (47.5) and multiplies it by 2.3 to give it a new value of 109.25.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>age <span class="ot">&lt;-</span> age <span class="sc">-</span> <span class="dv">20</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This will subtract 20 from the existing value of 122 to give <code>age</code> a new value of 102.</p>
</div>
</div>
</div>
<p>Objects can store other types of information, not just numbers. For example, they can store text:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>name_of_country <span class="ot">&lt;-</span> <span class="st">"Thailand"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Objects can also store more than one piece of information, not just a single number or a single piece of text. Two of the most important types of objects in R with multiple pieces of information are <span style="color: #D95F02;"><strong>vectors</strong></span> and <span style="color: #D95F02;"><strong>data.frames</strong></span>.</p>
</section>
<section id="vectors" class="level2" data-number="2.8">
<h2 data-number="2.8" class="anchored" data-anchor-id="vectors"><span class="header-section-number">2.8</span> Vectors</h2>
<p>A <span style="color: #D95F02;"><strong>vector</strong></span> is an object containing a list of things, where everything in list has the same basic data type. For example, everything in the vector can be a piece of text, or everything can be a number.</p>
<p>We can create vectors by using the R function <code>c()</code>, which “combines” or “concatenates” pieces of information. For example, here is a command to create a vector with 10 pieces of information: the names of the 10 ASEAN countries</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>ASEAN_countries <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Brunei"</span>,<span class="st">"Cambodia"</span>,<span class="st">"Indonesia"</span>,</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"Lao"</span>,<span class="st">"Myanmar"</span>,<span class="st">"Malaysia"</span>,<span class="st">"Philippines"</span>,</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"Singapore"</span>,<span class="st">"Thailand"</span>,<span class="st">"Vietnam"</span>)</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>ASEAN_countries</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code> [1] "Brunei"      "Cambodia"    "Indonesia"   "Lao"         "Myanmar"    
 [6] "Malaysia"    "Philippines" "Singapore"   "Thailand"    "Vietnam"    </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>numbers_less_than_10 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>)</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>numbers_less_than_10</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>[1] 1 2 3 4 5 6 7 8 9</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>claims_made_by_Australian_politician <span class="ot">&lt;-</span> <span class="fu">c</span>(F,F,F,T,F)</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>claims_made_by_Australian_politician</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>[1] FALSE FALSE FALSE  TRUE FALSE</code></pre>
</div>
</div>
<p>Note that you can use F and T as abbreviations for FALSE and TRUE.</p>
<p>R has special notation (<code>:</code>) to make lists of consecutive numbers:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>numbers_less_than_10 <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">9</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>numbers_less_than_10</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>[1] 1 2 3 4 5 6 7 8 9</code></pre>
</div>
</div>
<p>Note the <code>[6]</code> in the vector <code>ASEAN_countries</code>. This indicates that <code>"Malaysia"</code> is the 6th element of the vector (and the <code>[1]</code> indicates that <code>"Brunei"</code> is the 1st element of the vector). We can use square brackets to refer to individual elements of vectors</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>ASEAN_countries[<span class="dv">6</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>[1] "Malaysia"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>ASEAN_countries[<span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>[1] "Indonesia"</code></pre>
</div>
</div>
<p>or subsets of vectors</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>countries_sharing_borders_with_Thailand <span class="ot">&lt;-</span> ASEAN_countries[<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>)]</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>countries_sharing_borders_with_Thailand</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>[1] "Cambodia" "Lao"      "Myanmar"  "Malaysia"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>countries_on_Mekong_River <span class="ot">&lt;-</span> ASEAN_countries[<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">9</span>,<span class="dv">10</span>)]</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>countries_on_Mekong_River</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>[1] "Cambodia" "Lao"      "Myanmar"  "Thailand" "Vietnam" </code></pre>
</div>
</div>
<p>Some numerical operations can be applied to vectors of numbers, just as they are applied to individual numbers:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>numbers_less_than_10 <span class="sc">+</span> <span class="dv">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>[1]  4  5  6  7  8  9 10 11 12</code></pre>
</div>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>even_numbers <span class="ot">&lt;-</span> numbers_less_than_10 <span class="sc">*</span> <span class="dv">2</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>even_numbers</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>[1]  2  4  6  8 10 12 14 16 18</code></pre>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>square_numbers <span class="ot">&lt;-</span> numbers_less_than_10 <span class="sc">*</span> numbers_less_than_10</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>square_numbers</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>[1]  1  4  9 16 25 36 49 64 81</code></pre>
</div>
</div>
</section>
<section id="joining-vectors-of-the-same-length-to-make-a-data.frame" class="level2" data-number="2.9">
<h2 data-number="2.9" class="anchored" data-anchor-id="joining-vectors-of-the-same-length-to-make-a-data.frame"><span class="header-section-number">2.9</span> Joining vectors of the same length to make a <code>data.frame</code></h2>
<p>If we have 2 or more vectors of the same length, we can join them to make a table of data with multiple columns, one vector in each column, like something you might enter into a spreadsheet. In R, a table of data is called a <span style="color: #D95F02;"><strong>data.frame</strong></span>. To make a <code>data.frame</code>, lets combine our vector <code>ASEAN_countries</code> with a vector of <a href="https://aseanzone.wordpress.com/cultural/136-2/">national dishes</a>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>national_dish <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"ambuyat"</span>, <span class="st">"amok"</span>, <span class="st">"gado-gado"</span>, <span class="st">"chicken soup"</span>, <span class="st">"lahpet"</span>, <span class="st">"nasi lemak"</span>, <span class="st">"adobo"</span>, <span class="st">"laksa"</span>, <span class="st">"tom yum goong"</span>, <span class="st">"nem"</span>)</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>national_dish</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code> [1] "ambuyat"       "amok"          "gado-gado"     "chicken soup" 
 [5] "lahpet"        "nasi lemak"    "adobo"         "laksa"        
 [9] "tom yum goong" "nem"          </code></pre>
</div>
</div>
<p>We can double-check that the two vectors <code>ASEAN_countries</code> and <code>national_dish</code> have the same length, using a function called <code>length()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(ASEAN_countries)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>[1] 10</code></pre>
</div>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(national_dish)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>[1] 10</code></pre>
</div>
</div>
<p>and join the vectors together to make a <code>data.frame</code>, which we’ll call <code>ASEAN_info</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>ASEAN_info <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(ASEAN_countries, national_dish)</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>ASEAN_info</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>   ASEAN_countries national_dish
1           Brunei       ambuyat
2         Cambodia          amok
3        Indonesia     gado-gado
4              Lao  chicken soup
5          Myanmar        lahpet
6         Malaysia    nasi lemak
7      Philippines         adobo
8        Singapore         laksa
9         Thailand tom yum goong
10         Vietnam           nem</code></pre>
</div>
</div>
<p>I would prefer to call the first column (or vector) <code>country</code> instead of <code>ASEAN_countries</code>. So let’s change the name of this column using R’s <code>colnames()</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(ASEAN_info)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>[1] "ASEAN_countries" "national_dish"  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(ASEAN_info)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">"country"</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>ASEAN_info</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>       country national_dish
1       Brunei       ambuyat
2     Cambodia          amok
3    Indonesia     gado-gado
4          Lao  chicken soup
5      Myanmar        lahpet
6     Malaysia    nasi lemak
7  Philippines         adobo
8    Singapore         laksa
9     Thailand tom yum goong
10     Vietnam           nem</code></pre>
</div>
</div>
<p>We can select individual vectors in our data.frame by writing the vector’s name after the name of the data.frame, separated by <code>$</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>ASEAN_info<span class="sc">$</span>country</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code> [1] "Brunei"      "Cambodia"    "Indonesia"   "Lao"         "Myanmar"    
 [6] "Malaysia"    "Philippines" "Singapore"   "Thailand"    "Vietnam"    </code></pre>
</div>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>ASEAN_info<span class="sc">$</span>national_dish</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code> [1] "ambuyat"       "amok"          "gado-gado"     "chicken soup" 
 [5] "lahpet"        "nasi lemak"    "adobo"         "laksa"        
 [9] "tom yum goong" "nem"          </code></pre>
</div>
</div>
</section>
<section id="checking-whether-statements-are-true-or-false" class="level2" data-number="2.10">
<h2 data-number="2.10" class="anchored" data-anchor-id="checking-whether-statements-are-true-or-false"><span class="header-section-number">2.10</span> Checking whether statements are TRUE or FALSE</h2>
<p>R can check whether particular statements are TRUE or FALSE. This is very useful for selecting rows of large data.frames meeting particular conditions.</p>
<p>For example, we can check whether</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> <span class="sc">&gt;</span> <span class="dv">4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>[1] TRUE</code></pre>
</div>
</div>
<p>or</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="dv">49</span>) <span class="sc">&lt;</span> <span class="dv">7</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>[1] FALSE</code></pre>
</div>
</div>
<p>As well as the comparisons “greater than” (<code>&gt;</code>) and “less than” (<code>&lt;</code>), we can also make the comparisons</p>
<ul>
<li><code>&gt;=</code> (greater than or equal to)</li>
<li><code>&lt;=</code> (less than or equal to)</li>
<li><code>==</code> (equal to)</li>
<li><code>!=</code> (not equal to)</li>
</ul>
<p>These comparisons can be applied to vectors as well as individual variables. The comparisons <code>==</code> (equal to) and <code>!=</code> (not equal to) can also be applied to text as well as numbers.</p>
<p>For example</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> ASEAN_countries <span class="sc">!=</span> <span class="st">"Singapore"</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> ASEAN_countries <span class="sc">==</span> <span class="st">"Vietnam"</span></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(ASEAN_info, y, z)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>       country national_dish     y     z
1       Brunei       ambuyat  TRUE FALSE
2     Cambodia          amok  TRUE FALSE
3    Indonesia     gado-gado  TRUE FALSE
4          Lao  chicken soup  TRUE FALSE
5      Myanmar        lahpet  TRUE FALSE
6     Malaysia    nasi lemak  TRUE FALSE
7  Philippines         adobo  TRUE FALSE
8    Singapore         laksa FALSE FALSE
9     Thailand tom yum goong  TRUE FALSE
10     Vietnam           nem  TRUE  TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>over50 <span class="ot">&lt;-</span> square_numbers <span class="sc">&gt;</span> <span class="dv">50</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(square_numbers, over50)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>  square_numbers over50
1              1  FALSE
2              4  FALSE
3              9  FALSE
4             16  FALSE
5             25  FALSE
6             36  FALSE
7             49  FALSE
8             64   TRUE
9             81   TRUE</code></pre>
</div>
</div>
<p>Another useful option of checking whether something is TRUE or FALSE is to use the operator <code>%in%</code>. You can use this to check whether a particular value is in a vector, or which elements of one vector are in another vector. For example</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="st">"Brunei"</span> <span class="sc">%in%</span> ASEAN_countries</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="st">"East Timor"</span> <span class="sc">%in%</span> ASEAN_countries</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>is_square_number <span class="ot">&lt;-</span> numbers_less_than_10 <span class="sc">%in%</span> square_numbers</span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(numbers_less_than_10, is_square_number)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>  numbers_less_than_10 is_square_number
1                    1             TRUE
2                    2            FALSE
3                    3            FALSE
4                    4             TRUE
5                    5            FALSE
6                    6            FALSE
7                    7            FALSE
8                    8            FALSE
9                    9             TRUE</code></pre>
</div>
</div>
<p>We can use <code>%in%</code> to add a column to our <code>ASEAN_info</code> data.frame, showing which ASEAN countries the Mekong River runs through:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>on_Mekong_River <span class="ot">&lt;-</span> ASEAN_countries <span class="sc">%in%</span> countries_on_Mekong_River</span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>ASEAN_info <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(ASEAN_info, on_Mekong_River)</span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>ASEAN_info</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>       country national_dish on_Mekong_River
1       Brunei       ambuyat           FALSE
2     Cambodia          amok            TRUE
3    Indonesia     gado-gado           FALSE
4          Lao  chicken soup            TRUE
5      Myanmar        lahpet            TRUE
6     Malaysia    nasi lemak           FALSE
7  Philippines         adobo           FALSE
8    Singapore         laksa           FALSE
9     Thailand tom yum goong            TRUE
10     Vietnam           nem            TRUE</code></pre>
</div>
</div>
</section>
<section id="r-packages" class="level2" data-number="2.11">
<h2 data-number="2.11" class="anchored" data-anchor-id="r-packages"><span class="header-section-number">2.11</span> R packages</h2>
<p>It is possible to add functions to R by writing a <span style="color: #D95F02;"><strong>package</strong></span>, or by obtaining a package written by someone else. Packages are sometimes also called <span style="color: #D95F02;"><strong>libraries</strong></span>. There are over 10,000 packages in a public collection called CRAN (the comprehensive R archive network). R and RStudio have functionality for managing packages:</p>
<ul>
<li>You can see what packages are installed by typing <code>installed.packages()</code></li>
<li>You can install packages by typing <code>install.packages("packagename")</code>, where <code>packagename</code> is the package name, in quotes.</li>
<li>You can update installed packages by typing <code>update.packages()</code></li>
<li>You can remove a package with <code>remove.packages("packagename")</code></li>
<li>You can make a package available for use with <code>library(packagename)</code></li>
</ul>
<p>Packages can also be viewed, loaded, and detached in the Packages tab of the lower right panel in RStudio. Clicking on this tab will display all of the installed packages with a checkbox next to them. If the box next to a package name is checked, the package is loaded and if it is empty, the package is not loaded. Click an empty box to load that package and click a checked box to detach that package.</p>
<p>Packages can be installed and updated from the Package tab with the Install and Update buttons at the top of the tab.</p>
<p>Below we will discuss 3 packages with some very useful functions:</p>
<ul>
<li><code>dplyr</code> for working with data.frames and managing data</li>
<li><code>readr</code> for loading datasets into R from spreadsheets</li>
<li><code>ggplot2</code> for making graphs</li>
</ul>
<p>But before we can use these packages, we need to install them.</p>
<div class="callout callout-style-simple callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Install the packages <code>dplyr</code>, <code>readr</code>and <code>ggplot2</code>.</p>
</div>
</div>
<div class="callout callout-style-simple callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click to see the solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>We can use the <code>install.packages()</code> command to install the required packages.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"readr"</span>)</span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"dplyr"</span>)</span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"ggplot2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="loading-data-with-the-readr-package" class="level2" data-number="2.12">
<h2 data-number="2.12" class="anchored" data-anchor-id="loading-data-with-the-readr-package"><span class="header-section-number">2.12</span> Loading data with the <code>readr</code> package</h2>
<p>Let’s load a small CSV file with some Gapminder data for 10 ASEAN countries. We will use the package <code>readr</code> to do this.</p>
<p>I have put the CSV file on the internet here:</p>
<p><code>https://github.com/jimstankovich/stats-and-R/blob/main/asean_data.csv</code></p>
<p>There are two ways you can load the data into R. You can either download it onto your computer first (Method 1), or you can load it into R directly from the website.</p>
<section id="method-1-download-the-data-onto-your-computer-then-load-it-from-your-computer-into-r" class="level3">
<h3 class="anchored" data-anchor-id="method-1-download-the-data-onto-your-computer-then-load-it-from-your-computer-into-r">Method 1: Download the data onto your computer, then load it from your computer into R</h3>
<ul>
<li><p>Go to the URL (website) above.</p></li>
<li><p>Hover on the little arrow pointing down on the right. The words “Download raw file” will appear in a black box. <img src="images/Github_screenshot.png" class="img-fluid"></p></li>
<li><p>Click on this arrow to download the CSV file.</p></li>
<li><p>Find where the file was downloaded on your computer, and move it to a folder where you want to keep it.</p></li>
<li><p>In the “Files” window of RStudio (bottom right), navigate to the folder where you put the data, select the file, and choose “Import Dataset…” <img src="images/find_the_data_in_RStudio.png" class="img-fluid"></p></li>
<li><p>A new window appears, giving you some options to control how you open the file. In this case the default settings are fine… you don’t need to change anything. So just click “Import” on the bottom right to load the data. Note that the 3 R commands which will be run appear in a box on the bottom right. <img src="images/data_loading_options.png" class="img-fluid"></p></li>
<li><p>These 3 commands run in the Console window on the bottom left. The folder in the second line will be different on your computer (not the same as <code>~/Documents/Research Methodology in Social Sciences/introduction_to_R/data/</code>), depending on where you put the file <code>asean_2022_data.csv</code>.</p></li>
<li><p>Copy these 3 commands to your .R file so you can run them automatically next time, without having to open windows and click in them. This makes your analysis more “reproducible”.</p></li>
</ul>
<p>Let’s have a look at the 3 commands and what they do:</p>
<ol type="1">
<li><p><code>library(readr)</code>: The <code>library()</code> function makes the package <code>readr</code> available for use (as discussed in Section 2.8 above).</p></li>
<li><p><code>asean_data &lt;- read_csv("[path_to_folder]/asean_data.csv")</code>: The function <code>read_csv</code> is part of the <code>readr</code> package. Here it reads the CSV file <code>asean_data.csv</code> into R’s memory and gives it the name <code>asean_data</code>. (We could call it something else if we wanted to.) Some information appears in the Console window about the data. The <code>country</code> column has text information (character or “chr” for short). The other 4 columns (<code>year</code>, <code>pop</code>, <code>lifeExp</code>, <code>gdpPercap</code>) have numerical information (stored as “double-precision” numbers, or “dbl” for short… don’t worry about this computer science terminology if you haven’t heard it before).</p></li>
</ol>
<p><img src="images/description_of_data_that_was_loaded.png" class="img-fluid"></p>
<ol start="3" type="1">
<li><code>View(asean_data)</code>: This command opens a spreadsheet-style view of the data on the top-left. If you close this window the data is stored in R… it is just a “view” of the data.</li>
</ol>
<p><img src="images/data_View.png" class="img-fluid"></p>
<p>When you load the data, <code>asean_data</code> also appears in the “Environment” window on the top-right. If you click the little blue arrow, it provides some information on the variables in the data:</p>
<p><img src="images/environment.png" class="img-fluid"></p>
<p>In summary, 3 of the 4 windows in RStudio are showing similar information about the data we have just loaded. :) It is up to you to decide which way(s) of looking at the data are most helpful.</p>
<p>Yet another way to look at the data is to type the name of the dataset in the Console window:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>asean_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code># A tibble: 20 × 5
   country      year       pop lifeExp gdpPercap
   &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;
 1 Brunei       2012    407000    74       67800
 2 Brunei       2022    449000    74.2     58700
 3 Indonesia    2012 250000000    69.8      9020
 4 Indonesia    2022 276000000    69.1     12400
 5 Cambodia     2012  14800000    67.9      3020
 6 Cambodia     2022  16800000    69.1      4530
 7 Lao          2012   6510000    66.2      5430
 8 Lao          2022   7530000    69.8      7950
 9 Myanmar      2012  50200000    66.1      3190
10 Myanmar      2022  54200000    70.1      4120
11 Malaysia     2012  29700000    74.8     21700
12 Malaysia     2022  33900000    75.5     28300
13 Philippines  2012  98000000    70.7      6300
14 Philippines  2022 116000000    72.2      8580
15 Singapore    2012   5380000    83.3     82900
16 Singapore    2022   5980000    85.2    108000
17 Thailand     2012  69200000    77.7     15100
18 Thailand     2022  71700000    79.1     17500
19 Vietnam      2012  89300000    73.5      6950
20 Vietnam      2022  98200000    75       11400</code></pre>
</div>
</div>
</section>
<section id="method-2-download-the-data-directly-into-r-from-the-internet" class="level3">
<h3 class="anchored" data-anchor-id="method-2-download-the-data-directly-into-r-from-the-internet">Method 2: Download the data directly into R from the internet</h3>
<p>Starting at the same URL as before (<code>https://github.com/jimstankovich/stats-and-R/blob/main/asean_data.csv</code>), click on the word “Raw” on the top right. This takes you take another webpage with the “raw” (unformatted) CSV data. You can use the <code>read_csv</code> command to load the data from this webpage:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>asean_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"https://raw.githubusercontent.com/jimstankovich/stats-and-R/main/asean_data.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Method 2 is fine for the small dataset we are looking at here. However, if you are running your R commands many times and working with a large dataset, it is better to download the dataset onto your computer first (Method 1), rather than downloading a large dataset many times.</p>
</section>
</section>
<section id="using-the-dplyr-package-to-look-at-the-asean_data" class="level2" data-number="2.13">
<h2 data-number="2.13" class="anchored" data-anchor-id="using-the-dplyr-package-to-look-at-the-asean_data"><span class="header-section-number">2.13</span> Using the dplyr package to look at the <code>asean_data</code></h2>
<p>I use the <code>dplyr</code> package more than any other packages. It is very useful for managing datasets: cleaning them, joining them, and extracting smaller sections for statistical analysis.</p>
<p>Let’s have a look at how a few <code>dplyr</code> functions can be used to work with the <code>asean_data</code> we have just loaded.</p>
<p>Suppose we want to know the total population of the 10 ASEAN countries in 2022. We can do this by adding up the values of <code>pop</code> in the rows from 2022. Let’s do this in 2 steps</p>
<ol type="1">
<li>Create a smaller dataset that only includes rows with 2022 data.</li>
<li>Add up the values in the column/vector <code>pop</code>.</li>
</ol>
<p>For step 1, <code>dplyr</code> has a command called <code>filter()</code> for selecting particular rows of a dataset. The <code>filter()</code> command takes two arguments</p>
<ul>
<li>the name of a data.frame</li>
<li>a condition to satisfy: only include rows where this condition is TRUE</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>asean_2022 <span class="ot">&lt;-</span> <span class="fu">filter</span>(asean_data, year <span class="sc">==</span> <span class="dv">2022</span>)</span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>asean_2022</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code># A tibble: 10 × 5
   country      year       pop lifeExp gdpPercap
   &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;
 1 Brunei       2022    449000    74.2     58700
 2 Indonesia    2022 276000000    69.1     12400
 3 Cambodia     2022  16800000    69.1      4530
 4 Lao          2022   7530000    69.8      7950
 5 Myanmar      2022  54200000    70.1      4120
 6 Malaysia     2022  33900000    75.5     28300
 7 Philippines  2022 116000000    72.2      8580
 8 Singapore    2022   5980000    85.2    108000
 9 Thailand     2022  71700000    79.1     17500
10 Vietnam      2022  98200000    75       11400</code></pre>
</div>
</div>
<p>Lot’s of <code>dplyr</code> functions take the name of the data.frame as the first argument. There is an alternative notation for running these functions, where you put the name of the data.frame before the function, then join it to the function using the symbol <code>%&gt;%</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>asean_2022 <span class="ot">&lt;-</span> asean_data <span class="sc">%&gt;%</span></span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2022</span>)</span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a>asean_2022</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code># A tibble: 10 × 5
   country      year       pop lifeExp gdpPercap
   &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;
 1 Brunei       2022    449000    74.2     58700
 2 Indonesia    2022 276000000    69.1     12400
 3 Cambodia     2022  16800000    69.1      4530
 4 Lao          2022   7530000    69.8      7950
 5 Myanmar      2022  54200000    70.1      4120
 6 Malaysia     2022  33900000    75.5     28300
 7 Philippines  2022 116000000    72.2      8580
 8 Singapore    2022   5980000    85.2    108000
 9 Thailand     2022  71700000    79.1     17500
10 Vietnam      2022  98200000    75       11400</code></pre>
</div>
</div>
<p>I think this notation makes it clearer that we are starting with the <code>asean_data</code> data.frame, then applying the <code>filter()</code> function to make changes to it and produce <code>asean_2022</code>.</p>
<p>The <code>%&gt;%</code> notation is particularly good when you want to apply several functions to a data.frame. Below are two pieces of code that do the same thing… which do you think is easier to read?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a>large_wealthy_country <span class="ot">&lt;-</span> </span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">filter</span>(<span class="fu">filter</span>(asean_data, year <span class="sc">==</span> <span class="dv">2022</span>), </span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a>         gdpPercap <span class="sc">&gt;</span> <span class="dv">20000</span>), pop <span class="sc">&gt;</span> <span class="fl">10e6</span>)  <span class="co"># 10e6 is 10 million </span></span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a>large_wealthy_country</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code># A tibble: 1 × 5
  country   year      pop lifeExp gdpPercap
  &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;
1 Malaysia  2022 33900000    75.5     28300</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>large_wealthy_country <span class="ot">&lt;-</span> asean_data <span class="sc">%&gt;%</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2022</span>) <span class="sc">%&gt;%</span></span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(gdpPercap <span class="sc">&gt;</span> <span class="dv">20000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(pop <span class="sc">&gt;</span> <span class="fl">10e6</span>)  <span class="co"># 10e6 is 10 million</span></span>
<span id="cb111-5"><a href="#cb111-5" aria-hidden="true" tabindex="-1"></a>large_wealthy_country</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code># A tibble: 1 × 5
  country   year      pop lifeExp gdpPercap
  &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;
1 Malaysia  2022 33900000    75.5     28300</code></pre>
</div>
</div>
<p>Now we can use the <code>sum()</code> function to add up the values of <code>pop</code> in <code>asean_2022</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a>asean_pop_2022 <span class="ot">&lt;-</span> <span class="fu">sum</span>(asean_2022<span class="sc">$</span>pop)</span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a>asean_pop_2022</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>[1] 680759000</code></pre>
</div>
</div>
<p>So the total population of the ASEAN countries in 2022 was nearly 681 million. The function <code>sum()</code> is part of “base R”… you don’t need to load <code>dplyr</code> to use it.</p>
<p>Suppose we want to calculate the average GDP (Gross Domestic Product) per person, averaged across all 681 million people living in ASEAN countries. (If you are interested, the GDP figures in this dataset are in 2017 (inflation-adjusted) US dollars at <a href="https://en.wikipedia.org/wiki/Purchasing_power_parity">purchasing power parity</a>)</p>
<p>Here are the steps for calculating average GDP:</p>
<ul>
<li>calculate the total GDP for each country</li>
<li>add up total GDP across countries</li>
<li>divide total ASEAN GDP by the ASEAN population</li>
</ul>
<p>Total GDP for each country is equal to the country’s population multiplied by GDP per person (per capita). Let’s add a <code>total_gdp</code> column to the <code>asean_2022</code> data.frame using a <code>dplyr</code> command called <code>mutate()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>asean_2022 <span class="ot">&lt;-</span> asean_2022 <span class="sc">%&gt;%</span></span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gdp =</span> pop <span class="sc">*</span> gdpPercap)</span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a>asean_2022</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code># A tibble: 10 × 6
   country      year       pop lifeExp gdpPercap           gdp
   &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;         &lt;dbl&gt;
 1 Brunei       2022    449000    74.2     58700   26356300000
 2 Indonesia    2022 276000000    69.1     12400 3422400000000
 3 Cambodia     2022  16800000    69.1      4530   76104000000
 4 Lao          2022   7530000    69.8      7950   59863500000
 5 Myanmar      2022  54200000    70.1      4120  223304000000
 6 Malaysia     2022  33900000    75.5     28300  959370000000
 7 Philippines  2022 116000000    72.2      8580  995280000000
 8 Singapore    2022   5980000    85.2    108000  645840000000
 9 Thailand     2022  71700000    79.1     17500 1254750000000
10 Vietnam      2022  98200000    75       11400 1119480000000</code></pre>
</div>
</div>
<p>Then we can add up <code>total_gdp</code> across countries using the <code>sum()</code> function again:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a>asean_gdp_2022 <span class="ot">=</span> <span class="fu">sum</span>(asean_2022<span class="sc">$</span>gdp)</span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a>asean_gdp_2022</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>[1] 8.782748e+12</code></pre>
</div>
</div>
<p>and calculate</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>asean_gdp_per_capita_2022 <span class="ot">&lt;-</span> asean_gdp_2022 <span class="sc">/</span> asean_pop_2022</span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>asean_gdp_per_capita_2022</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code>[1] 12901.41</code></pre>
</div>
</div>
<p>Here is some <code>dplyr</code> code that starts with our original CSV file (<code>asean_data</code>), and generates a summary of the 2022 population and GDP statistics for the whole of ASEAN.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a>asean_2022_summary <span class="ot">&lt;-</span> asean_data <span class="sc">%&gt;%</span></span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2022</span>) <span class="sc">%&gt;%</span></span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gdp =</span> pop <span class="sc">*</span> gdpPercap) <span class="sc">%&gt;%</span></span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb121-5"><a href="#cb121-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">pop =</span> <span class="fu">sum</span>(pop),</span>
<span id="cb121-6"><a href="#cb121-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_gdp =</span> <span class="fu">sum</span>(gdp),</span>
<span id="cb121-7"><a href="#cb121-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">gdpPercap =</span> total_gdp <span class="sc">/</span> pop)</span>
<span id="cb121-8"><a href="#cb121-8" aria-hidden="true" tabindex="-1"></a>asean_2022_summary</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code># A tibble: 1 × 3
        pop     total_gdp gdpPercap
      &lt;dbl&gt;         &lt;dbl&gt;     &lt;dbl&gt;
1 680759000 8782747800000    12901.</code></pre>
</div>
</div>
<p>It uses <code>filter()</code> and <code>mutate()</code> in the same way we’ve seen before. There is also a new command <code>summarise()</code>.</p>
<p>If we wanted these statistics for both 2012 and 2022, we could remove the <code>filter()</code> function, keep data for both year, and instead apply another function <code>group_by()</code> before <code>summarise()</code>, to generate summaries for both years at the same time.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>asean_gdp_summary <span class="ot">&lt;-</span> asean_data <span class="sc">%&gt;%</span></span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gdp =</span> pop <span class="sc">*</span> gdpPercap) <span class="sc">%&gt;%</span></span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb123-4"><a href="#cb123-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb123-5"><a href="#cb123-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">pop =</span> <span class="fu">sum</span>(pop),</span>
<span id="cb123-6"><a href="#cb123-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_gdp =</span> <span class="fu">sum</span>(gdp),</span>
<span id="cb123-7"><a href="#cb123-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">gdpPercap =</span> total_gdp <span class="sc">/</span> pop)</span>
<span id="cb123-8"><a href="#cb123-8" aria-hidden="true" tabindex="-1"></a>asean_gdp_summary</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code># A tibble: 2 × 4
   year       pop     total_gdp gdpPercap
  &lt;dbl&gt;     &lt;dbl&gt;         &lt;dbl&gt;     &lt;dbl&gt;
1  2012 613497000 5896224900000     9611.
2  2022 680759000 8782747800000    12901.</code></pre>
</div>
</div>
<p>I don’t think the <code>total_gdp</code> column is very useful… trillions of dollars seem to big to understand. We can select columns to keep using another <code>dplyr</code> command, <code>select()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>asean_gdp_summary <span class="sc">%&gt;%</span></span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, pop, gdpPercap)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code># A tibble: 2 × 3
   year       pop gdpPercap
  &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
1  2012 613497000     9611.
2  2022 680759000    12901.</code></pre>
</div>
</div>
<p>Or we can exclude particular columns by putting a <code>-</code> in front of their names:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>asean_gdp_summary <span class="sc">%&gt;%</span></span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>total_gdp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code># A tibble: 2 × 3
   year       pop gdpPercap
  &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
1  2012 613497000     9611.
2  2022 680759000    12901.</code></pre>
</div>
</div>
<p>Maybe you’re more interested in health than money. If so, you could modify these calculations to calculate average life expectancy across ASEAN countries instead of per capita GDP. All that you need to change is, instead of multiplying per capita GDP by population, multiply life expectancy by population to give “life expectancy times population”, or “letp” for short.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a>asean_lifeExp <span class="ot">&lt;-</span> asean_data <span class="sc">%&gt;%</span></span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">letp =</span> pop <span class="sc">*</span> lifeExp) <span class="sc">%&gt;%</span></span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb129-4"><a href="#cb129-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb129-5"><a href="#cb129-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">pop =</span> <span class="fu">sum</span>(pop),</span>
<span id="cb129-6"><a href="#cb129-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">letp =</span> <span class="fu">sum</span>(letp),</span>
<span id="cb129-7"><a href="#cb129-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">lifeExp =</span> letp <span class="sc">/</span> pop) <span class="sc">%&gt;%</span></span>
<span id="cb129-8"><a href="#cb129-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>letp)</span>
<span id="cb129-9"><a href="#cb129-9" aria-hidden="true" tabindex="-1"></a>asean_lifeExp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="output"><code># A tibble: 2 × 3
   year       pop lifeExp
  &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
1  2012 613497000    71.3
2  2022 680759000    72.1</code></pre>
</div>
</div>
</section>
<section id="plotting-data-with-the-ggplot2-package" class="level2" data-number="2.14">
<h2 data-number="2.14" class="anchored" data-anchor-id="plotting-data-with-the-ggplot2-package"><span class="header-section-number">2.14</span> Plotting data with the <code>ggplot2</code> package</h2>
<p>I have to confess: I find this package hard to use…</p>
<section id="bar-graphs" class="level3">
<h3 class="anchored" data-anchor-id="bar-graphs">Bar graphs</h3>
<p>https://r-graph-gallery.com/218-basic-barplots-with-ggplot2.html</p>
<p>http://www.sthda.com/english/wiki/ggplot2-title-main-axis-and-legend-titles</p>
<p>https://stackoverflow.com/questions/15629192/making-a-bar-chart-in-ggplot-with-vertical-labels-in-x-axis</p>
<p>https://www.r-bloggers.com/2021/09/adding-text-labels-to-ggplot2-bar-chart/</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(asean_2022, <span class="fu">aes</span>(<span class="at">x=</span>country, <span class="at">y=</span>lifeExp)) <span class="sc">+</span></span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">fill =</span> <span class="st">"dodgerblue3"</span>, <span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb131-4"><a href="#cb131-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Life expectancy at birth (2022)"</span>) <span class="sc">+</span></span>
<span id="cb131-5"><a href="#cb131-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> lifeExp, <span class="at">vjust =</span> <span class="fl">1.2</span>)) <span class="sc">+</span> </span>
<span id="cb131-6"><a href="#cb131-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span> </span>
<span id="cb131-7"><a href="#cb131-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">90</span>,<span class="at">hjust=</span><span class="dv">1</span>,<span class="at">vjust=</span><span class="fl">0.5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Introduction_to_R_files/figure-html/unnamed-chunk-58-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>https://rpubs.com/dvdunne/ggplot_two_bars</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(asean_data, <span class="fu">aes</span>(<span class="at">x=</span>country, <span class="at">y=</span>lifeExp, <span class="at">fill=</span>year)) <span class="sc">+</span></span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb132-4"><a href="#cb132-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Life expectancy at birth"</span>) <span class="sc">+</span></span>
<span id="cb132-5"><a href="#cb132-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span> </span>
<span id="cb132-6"><a href="#cb132-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">90</span>,<span class="at">hjust=</span><span class="dv">1</span>,<span class="at">vjust=</span><span class="fl">0.5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Introduction_to_R_files/figure-html/unnamed-chunk-59-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This is not what we want! Need to convert year to a categorical variable (called a factor in R)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a>asean_data <span class="ot">&lt;-</span> asean_data <span class="sc">%&gt;%</span></span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">as.factor</span>(year))</span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(asean_data, <span class="fu">aes</span>(<span class="at">x=</span>country, <span class="at">y=</span>lifeExp, <span class="at">fill=</span>year)) <span class="sc">+</span></span>
<span id="cb133-4"><a href="#cb133-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb133-5"><a href="#cb133-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Life expectancy at birth"</span>) <span class="sc">+</span></span>
<span id="cb133-6"><a href="#cb133-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span> </span>
<span id="cb133-7"><a href="#cb133-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">90</span>,<span class="at">hjust=</span><span class="dv">1</span>,<span class="at">vjust=</span><span class="fl">0.5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Introduction_to_R_files/figure-html/unnamed-chunk-60-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a>life_exp_table <span class="ot">&lt;-</span> asean_data <span class="sc">%&gt;%</span></span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country) <span class="sc">%&gt;%</span></span>
<span id="cb134-4"><a href="#cb134-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb134-5"><a href="#cb134-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">le2012 =</span> <span class="fu">first</span>(lifeExp),</span>
<span id="cb134-6"><a href="#cb134-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">le2022 =</span> <span class="fu">last</span>(lifeExp),</span>
<span id="cb134-7"><a href="#cb134-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">le_change =</span> le2022 <span class="sc">-</span> le2012)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>https://ggplot2.tidyverse.org/reference/lims.html</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(life_exp_table, <span class="fu">aes</span>(<span class="at">x=</span>country, <span class="at">y=</span>le_change)) <span class="sc">+</span></span>
<span id="cb135-3"><a href="#cb135-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">fill =</span> <span class="st">"dodgerblue3"</span>, <span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb135-4"><a href="#cb135-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"change in life expectancy (years), 2012 -&gt; 2022"</span>) <span class="sc">+</span></span>
<span id="cb135-5"><a href="#cb135-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(le_change,<span class="dv">1</span>), <span class="at">vjust =</span> <span class="sc">-</span><span class="dv">1</span>)) <span class="sc">+</span> </span>
<span id="cb135-6"><a href="#cb135-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span> </span>
<span id="cb135-7"><a href="#cb135-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">90</span>,<span class="at">hjust=</span><span class="dv">1</span>,<span class="at">vjust=</span><span class="fl">0.5</span>)) <span class="sc">+</span></span>
<span id="cb135-8"><a href="#cb135-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="fl">4.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Introduction_to_R_files/figure-html/unnamed-chunk-62-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="line-graphs-showing-changes-in-a-variable-over-time" class="level3">
<h3 class="anchored" data-anchor-id="line-graphs-showing-changes-in-a-variable-over-time">Line graphs showing changes in a variable over time</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a>big_gapminder_dataset <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"~/Documents/Research Methodology in Social Sciences/introduction_to_R/data/big_gapminder_dataset.csv"</span>,</span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-4"><a href="#cb136-4" aria-hidden="true" tabindex="-1"></a>lifeExp_since_1900 <span class="ot">&lt;-</span> big_gapminder_dataset <span class="sc">%&gt;%</span> </span>
<span id="cb136-5"><a href="#cb136-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&gt;=</span> <span class="dv">1900</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="dv">2022</span>) <span class="sc">%&gt;%</span></span>
<span id="cb136-6"><a href="#cb136-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(country, continent, year, lifeExp) <span class="sc">%&gt;%</span></span>
<span id="cb136-7"><a href="#cb136-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">asean =</span> country <span class="sc">%in%</span> ASEAN_countries)</span>
<span id="cb136-8"><a href="#cb136-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-9"><a href="#cb136-9" aria-hidden="true" tabindex="-1"></a>asean_lifexp_since_1900 <span class="ot">&lt;-</span> lifeExp_since_1900 <span class="sc">%&gt;%</span></span>
<span id="cb136-10"><a href="#cb136-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(asean <span class="sc">==</span> <span class="cn">TRUE</span>)</span>
<span id="cb136-11"><a href="#cb136-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-12"><a href="#cb136-12" aria-hidden="true" tabindex="-1"></a>other_countries <span class="ot">&lt;-</span> lifeExp_since_1900 <span class="sc">%&gt;%</span></span>
<span id="cb136-13"><a href="#cb136-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(asean <span class="sc">==</span> <span class="cn">FALSE</span>)</span>
<span id="cb136-14"><a href="#cb136-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-15"><a href="#cb136-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Palette good for people who are colour-blind</span></span>
<span id="cb136-16"><a href="#cb136-16" aria-hidden="true" tabindex="-1"></a><span class="co"># https://stackoverflow.com/questions/9563711/r-color-palettes-for-many-data-classes</span></span>
<span id="cb136-17"><a href="#cb136-17" aria-hidden="true" tabindex="-1"></a>colours1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"#88CCEE"</span>, <span class="st">"#CC6677"</span>, <span class="st">"#DDCC77"</span>, <span class="st">"#117733"</span>,</span>
<span id="cb136-18"><a href="#cb136-18" aria-hidden="true" tabindex="-1"></a>             <span class="st">"#332288"</span>, <span class="st">"#AA4499"</span>, <span class="st">"#44AA99"</span>, <span class="st">"#999933"</span>,</span>
<span id="cb136-19"><a href="#cb136-19" aria-hidden="true" tabindex="-1"></a>             <span class="st">"#882255"</span>, <span class="st">"#661100"</span>)</span>
<span id="cb136-20"><a href="#cb136-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-21"><a href="#cb136-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Another palette from top of the same chat</span></span>
<span id="cb136-22"><a href="#cb136-22" aria-hidden="true" tabindex="-1"></a>colours2 <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb136-23"><a href="#cb136-23" aria-hidden="true" tabindex="-1"></a>  <span class="st">"dodgerblue2"</span>, <span class="st">"#E31A1C"</span>, <span class="co"># red</span></span>
<span id="cb136-24"><a href="#cb136-24" aria-hidden="true" tabindex="-1"></a>  <span class="st">"green4"</span>,</span>
<span id="cb136-25"><a href="#cb136-25" aria-hidden="true" tabindex="-1"></a>  <span class="st">"#6A3D9A"</span>, <span class="co"># purple</span></span>
<span id="cb136-26"><a href="#cb136-26" aria-hidden="true" tabindex="-1"></a>  <span class="st">"#FF7F00"</span>, <span class="co"># orange</span></span>
<span id="cb136-27"><a href="#cb136-27" aria-hidden="true" tabindex="-1"></a>  <span class="st">"black"</span>, <span class="st">"gold1"</span>,</span>
<span id="cb136-28"><a href="#cb136-28" aria-hidden="true" tabindex="-1"></a>  <span class="st">"skyblue2"</span>, <span class="st">"#FB9A99"</span>, <span class="co"># lt pink</span></span>
<span id="cb136-29"><a href="#cb136-29" aria-hidden="true" tabindex="-1"></a>  <span class="st">"palegreen2"</span>)</span>
<span id="cb136-30"><a href="#cb136-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-31"><a href="#cb136-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-32"><a href="#cb136-32" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> asean_lifexp_since_1900, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>year, <span class="at">y=</span>lifeExp, <span class="at">group=</span>country, <span class="at">color=</span>country)) <span class="sc">+</span></span>
<span id="cb136-33"><a href="#cb136-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb136-34"><a href="#cb136-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> colours2) <span class="sc">+</span> </span>
<span id="cb136-35"><a href="#cb136-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Life expectancy at birth"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Introduction_to_R_files/figure-html/unnamed-chunk-63-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="co"># https://stackoverflow.com/questions/40297206/overlaying-two-plots-using-ggplot2-in-r</span></span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> other_countries, </span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>year, <span class="at">y=</span>lifeExp, <span class="at">group=</span>country)) <span class="sc">+</span></span>
<span id="cb137-4"><a href="#cb137-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">col =</span> <span class="fu">rgb</span>(<span class="fl">0.8</span>,<span class="fl">0.8</span>,<span class="fl">0.8</span>,<span class="fl">0.5</span>)) <span class="sc">+</span></span>
<span id="cb137-5"><a href="#cb137-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">data =</span> asean_lifexp_since_1900, </span>
<span id="cb137-6"><a href="#cb137-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>year, <span class="at">y=</span>lifeExp, <span class="at">group=</span>country,</span>
<span id="cb137-7"><a href="#cb137-7" aria-hidden="true" tabindex="-1"></a>                          <span class="at">color=</span>country)) <span class="sc">+</span></span>
<span id="cb137-8"><a href="#cb137-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> colours2) <span class="sc">+</span> </span>
<span id="cb137-9"><a href="#cb137-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Life expectancy at birth"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Introduction_to_R_files/figure-html/unnamed-chunk-63-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="scatterplots-plot-of-2-continuous-variables-against-each-other" class="level3">
<h3 class="anchored" data-anchor-id="scatterplots-plot-of-2-continuous-variables-against-each-other">Scatterplots (plot of 2 continuous variables against each other)</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a>asean_2022 <span class="sc">%&gt;%</span></span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>gdpPercap, <span class="at">y=</span>lifeExp)) <span class="sc">+</span></span>
<span id="cb138-3"><a href="#cb138-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">col =</span> <span class="st">"dodgerblue"</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb138-4"><a href="#cb138-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"GDP per capita, 2022 (purchasing power parity, 2017 US dollars)"</span>) <span class="sc">+</span></span>
<span id="cb138-5"><a href="#cb138-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"life expectancy at birth, 2022"</span>) <span class="sc">+</span></span>
<span id="cb138-6"><a href="#cb138-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Introduction_to_R_files/figure-html/unnamed-chunk-64-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="scatterplot-with-different-sized-symbols" class="level2" data-number="2.15">
<h2 data-number="2.15" class="anchored" data-anchor-id="scatterplot-with-different-sized-symbols"><span class="header-section-number">2.15</span> Scatterplot with different sized symbols</h2>
<p>(sometimes called a bubble plot)</p>
<p>https://www.datanovia.com/en/blog/how-to-remove-legend-from-a-ggplot/</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a>asean_2022 <span class="sc">%&gt;%</span></span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>gdpPercap, <span class="at">y=</span>lifeExp, <span class="at">size=</span>pop)) <span class="sc">+</span></span>
<span id="cb139-3"><a href="#cb139-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">col =</span> <span class="st">"dodgerblue"</span>, <span class="at">alpha=</span><span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb139-4"><a href="#cb139-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">24</span>), <span class="at">name=</span><span class="st">"Population"</span>) <span class="sc">+</span></span>
<span id="cb139-5"><a href="#cb139-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">2500</span>, <span class="dv">170000</span>)) <span class="sc">+</span></span>
<span id="cb139-6"><a href="#cb139-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">65</span>,<span class="dv">87</span>) <span class="sc">+</span> </span>
<span id="cb139-7"><a href="#cb139-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"GDP per capita, 2022 (purchasing power parity, 2017 US dollars)"</span>) <span class="sc">+</span></span>
<span id="cb139-8"><a href="#cb139-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"life expectancy at birth, 2022"</span>) <span class="sc">+</span></span>
<span id="cb139-9"><a href="#cb139-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">x=</span>gdpPercap, <span class="at">y=</span>lifeExp, <span class="at">label =</span> country, <span class="at">size =</span> <span class="dv">5</span><span class="sc">*</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, <span class="at">vjust =</span> <span class="sc">-</span><span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb139-10"><a href="#cb139-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb139-11"><a href="#cb139-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Introduction_to_R_files/figure-html/unnamed-chunk-65-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Make a rough match of the plot at https://www.gapminder.org/tools/</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a>big_gapminder_dataset <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"~/Documents/Research Methodology in Social Sciences/introduction_to_R/data/big_gapminder_dataset.csv"</span>,</span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb140-3"><a href="#cb140-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-4"><a href="#cb140-4" aria-hidden="true" tabindex="-1"></a>world_2022 <span class="ot">&lt;-</span> big_gapminder_dataset <span class="sc">%&gt;%</span></span>
<span id="cb140-5"><a href="#cb140-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="st">"2022"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb140-6"><a href="#cb140-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">!=</span> <span class="st">"Monaco"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb140-7"><a href="#cb140-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(pop))</span>
<span id="cb140-8"><a href="#cb140-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-9"><a href="#cb140-9" aria-hidden="true" tabindex="-1"></a>world_2022 <span class="sc">%&gt;%</span></span>
<span id="cb140-10"><a href="#cb140-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>gdpPercap, <span class="at">y=</span>lifeExp, <span class="at">size=</span>pop, <span class="at">col=</span>continent)) <span class="sc">+</span></span>
<span id="cb140-11"><a href="#cb140-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha=</span><span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb140-12"><a href="#cb140-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size</span>(<span class="at">range =</span> <span class="fu">c</span>(.<span class="dv">1</span>, <span class="dv">24</span>), <span class="at">name=</span><span class="st">"Population"</span>) <span class="sc">+</span></span>
<span id="cb140-13"><a href="#cb140-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">trans=</span><span class="st">'log10'</span>) <span class="sc">+</span></span>
<span id="cb140-14"><a href="#cb140-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">size =</span> <span class="st">"none"</span>) <span class="sc">+</span> </span>
<span id="cb140-15"><a href="#cb140-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb140-16"><a href="#cb140-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"GDP per capita, 2022 (purchasing power parity, 2017 US dollars)"</span>) <span class="sc">+</span></span>
<span id="cb140-17"><a href="#cb140-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"life expectancy at birth, 2022"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Introduction_to_R_files/figure-html/unnamed-chunk-66-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reproduce the hover feature with the plotly package</span></span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a><span class="co"># and match the continent colours more closely</span></span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-4"><a href="#cb141-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb141-5"><a href="#cb141-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-6"><a href="#cb141-6" aria-hidden="true" tabindex="-1"></a>continent_colours <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb141-7"><a href="#cb141-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">continent =</span> <span class="fu">c</span>(<span class="st">"Africa"</span>, <span class="st">"Americas"</span>, <span class="st">"Asia"</span>, <span class="st">"Europe"</span>),</span>
<span id="cb141-8"><a href="#cb141-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">colour =</span> <span class="fu">c</span>(<span class="st">"rgba(95,210,230,1)"</span>, <span class="st">"rgba(154,231,71,1)"</span>,</span>
<span id="cb141-9"><a href="#cb141-9" aria-hidden="true" tabindex="-1"></a>             <span class="st">"rgba(237,100,117,1)"</span>, <span class="st">"rgba(251,230,77,1)"</span>)</span>
<span id="cb141-10"><a href="#cb141-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb141-11"><a href="#cb141-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-12"><a href="#cb141-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotly doesn't handle rows with missing data as well as ggplot2</span></span>
<span id="cb141-13"><a href="#cb141-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove these rows explicitly...</span></span>
<span id="cb141-14"><a href="#cb141-14" aria-hidden="true" tabindex="-1"></a>world_2022v2 <span class="ot">&lt;-</span> world_2022 <span class="sc">%&gt;%</span></span>
<span id="cb141-15"><a href="#cb141-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(lifeExp) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(gdpPercap) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(pop)) <span class="sc">%&gt;%</span></span>
<span id="cb141-16"><a href="#cb141-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(continent_colours)</span>
<span id="cb141-17"><a href="#cb141-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-18"><a href="#cb141-18" aria-hidden="true" tabindex="-1"></a><span class="co">#https://plotly.com/r/bubble-charts/</span></span>
<span id="cb141-19"><a href="#cb141-19" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>(world_2022v2, <span class="at">x =</span> <span class="sc">~</span>gdpPercap, <span class="at">y =</span> <span class="sc">~</span>lifeExp, <span class="at">text =</span> <span class="sc">~</span>country,</span>
<span id="cb141-20"><a href="#cb141-20" aria-hidden="true" tabindex="-1"></a>               <span class="at">type =</span> <span class="st">"scatter"</span>, <span class="at">mode =</span> <span class="st">"markers"</span>,</span>
<span id="cb141-21"><a href="#cb141-21" aria-hidden="true" tabindex="-1"></a>               <span class="at">marker =</span> <span class="fu">list</span>(<span class="at">size =</span> <span class="sc">~</span>(<span class="fu">sqrt</span>((pop)<span class="sc">/</span><span class="dv">300000</span>)<span class="sc">+</span><span class="fl">0.2</span>), </span>
<span id="cb141-22"><a href="#cb141-22" aria-hidden="true" tabindex="-1"></a>                             <span class="at">opacity =</span> <span class="fl">0.8</span>, <span class="at">color =</span> <span class="sc">~</span>colour))</span>
<span id="cb141-23"><a href="#cb141-23" aria-hidden="true" tabindex="-1"></a><span class="co">#https://plotly.com/r/figure-labels/</span></span>
<span id="cb141-24"><a href="#cb141-24" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> fig <span class="sc">%&gt;%</span> </span>
<span id="cb141-25"><a href="#cb141-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(fig, </span>
<span id="cb141-26"><a href="#cb141-26" aria-hidden="true" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">"2022 Gapminder data"</span>,</span>
<span id="cb141-27"><a href="#cb141-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">xaxis =</span> <span class="fu">list</span>(</span>
<span id="cb141-28"><a href="#cb141-28" aria-hidden="true" tabindex="-1"></a>           <span class="at">type =</span> <span class="st">"log"</span>, </span>
<span id="cb141-29"><a href="#cb141-29" aria-hidden="true" tabindex="-1"></a>           <span class="at">title =</span> <span class="st">"GDP per capita (purchasing power parity, 2017 US dollars)"</span>),</span>
<span id="cb141-30"><a href="#cb141-30" aria-hidden="true" tabindex="-1"></a>         <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"life expectancy at birth"</span>))</span>
<span id="cb141-31"><a href="#cb141-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-32"><a href="#cb141-32" aria-hidden="true" tabindex="-1"></a>fig</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-d61816b844cc9cd98e0c" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-d61816b844cc9cd98e0c">{"x":{"visdat":{"51c5569b0709":["function () ","plotlyVisDat"]},"cur_data":"51c5569b0709","attrs":{"51c5569b0709":{"x":{},"y":{},"text":{},"mode":"markers","marker":{"size":{},"opacity":0.80000000000000004,"color":{}},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"2022 Gapminder data","xaxis":{"domain":[0,1],"automargin":true,"type":"log","title":"GDP per capita (purchasing power parity, 2017 US dollars)"},"yaxis":{"domain":[0,1],"automargin":true,"title":"life expectancy at birth"},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[18200,7100,64700,12400,5450,4960,15100,6260,27600,19500,41600,2380,8580,12800,1130,11400,15300,33000,53600,17500,46800,2620,46000,13500,43800,4120,4880,15700,45500,39800,2280,3570,22400,11200,9200,1430,36800,10700,49000,8060,50000,5910,8070,12700,28300,1720,5500,1240,4000,1500,6180,5540,3730,51000,1270,1620,58700,2160,2130,3350,12200,1470,3300,32700.000000000004,25900,26100,10900,9160,1410,58600,1160,3560,4530,2140,2700,2360,3440,708,10600,8200,53200,2800,9320,10600,19300,386,41700,54800,15000,31500,5710,35700,3770,35300,4140,19100,74300,44300,56300,2210,71000,1640,7950,20500,5820,19800,26800,13500,5190,14700,9400,108000,3210,59700,33200,819,49600,13200,67500,1460,5720,44900,22000,114000,5440,35300,33300,49200,34000,17000,1950,24400,12100,12900,16700,15500,10000,16000,39600,2130,97100,15500,9490,13900,2280,42200,1860,17100,32700.000000000004,14700,23500,51900,4090,37800,22800,43600,9130,4990,12000,3250,34400,11300,2250,116000,22100,14900,7690,48200,21000,58700,34200,9700,55000,2790,15100,4010,5120,15000,2000,14400,3260,29800,6040,14600,21500,56000,11500,28800,6120,64500,13500,11100,4590],"y":[78.200000000000003,67.599999999999994,78,69.099999999999994,65.5,65.200000000000003,73.900000000000006,75.5,69.200000000000003,76.299999999999997,85.200000000000003,68.599999999999994,72.200000000000003,69.799999999999997,64.5,75,76.200000000000003,79,80.599999999999994,79.099999999999994,81.5,67,83.400000000000006,60.5,83.599999999999994,70.099999999999994,65.599999999999994,77,83.299999999999997,83.5,66.900000000000006,70.200000000000003,75.400000000000006,76.799999999999997,73,62.600000000000001,77.200000000000003,67.900000000000006,82.700000000000003,74,75.099999999999994,64.5,68.799999999999997,77.299999999999997,75.5,66.299999999999997,65.5,56.899999999999999,72,64.799999999999997,74,63.799999999999997,62.700000000000003,83.400000000000006,61.700000000000003,73.5,80.900000000000006,61.399999999999999,61.600000000000001,74.400000000000006,77.900000000000006,63.5,62.200000000000003,73.200000000000003,79.299999999999997,69.799999999999997,77,68.200000000000003,60.100000000000001,82.200000000000003,57.5,67.900000000000006,69.099999999999994,59.100000000000001,60.5,69.400000000000006,64,63.5,75.900000000000006,68.900000000000006,81.900000000000006,63.299999999999997,76.299999999999997,79.200000000000003,73.799999999999997,63.399999999999999,78.299999999999997,83.299999999999997,71.400000000000006,80.299999999999997,69.900000000000006,82.299999999999997,65.099999999999994,75.099999999999994,70,73,73.400000000000006,82.799999999999997,82.700000000000003,65.799999999999997,84.5,61.899999999999999,69.799999999999997,73.099999999999994,76,75.599999999999994,69.900000000000006,73.299999999999997,72.700000000000003,71.200000000000003,74.599999999999994,85.200000000000003,65.799999999999997,81.599999999999994,75.200000000000003,51.799999999999997,82.299999999999997,72,83.299999999999997,66.099999999999994,73,82.200000000000003,78,82.5,69.700000000000003,70.099999999999994,79,82.099999999999994,79.200000000000003,71.5,63.100000000000001,78,68.900000000000006,71.900000000000006,75,76.099999999999994,75,73.700000000000003,74.299999999999997,65.799999999999997,76.799999999999997,62.700000000000003,60,66.900000000000006,50.700000000000003,81.900000000000006,59.899999999999999,71.099999999999994,76.299999999999997,65.5,75.400000000000006,76.299999999999997,71.400000000000006,78.5,74.299999999999997,81.299999999999997,54.200000000000003,66.599999999999994,68.799999999999997,68.299999999999997,64.299999999999997,74,59.5,83.400000000000006,75.700000000000003,70.700000000000003,72.5,83.099999999999994,79.799999999999997,74.200000000000003,76.599999999999994,71.5,84.5,66,76.599999999999994,71.200000000000003,70.900000000000006,72.900000000000006,61.200000000000003,73.799999999999997,64,71.200000000000003,73.400000000000006,69.099999999999994,76.799999999999997,82.700000000000003,71.799999999999997,72.599999999999994,65.900000000000006,82.599999999999994,68.099999999999994,63.899999999999999,68.5],"text":["China","India","USA","Indonesia","Pakistan","Nigeria","Brazil","Bangladesh","Russia","Mexico","Japan","Ethiopia","Philippines","Egypt","Congo, Dem. Rep.","Vietnam","Iran","Turkey","Germany","Thailand","UK","Tanzania","France","South Africa","Italy","Myanmar","Kenya","Colombia","South Korea","Spain","Uganda","Sudan","Argentina","Algeria","Iraq","Afghanistan","Poland","Ukraine","Canada","Morocco","Saudi Arabia","Angola","Uzbekistan","Peru","Malaysia","Yemen","Ghana","Mozambique","Nepal","Madagascar","Venezuela","Cote d'Ivoire","Cameroon","Australia","Niger","North Korea","Taiwan","Burkina Faso","Mali","Syria","Sri Lanka","Malawi","Zambia","Romania","Chile","Kazakhstan","Ecuador","Guatemala","Chad","Netherlands","Somalia","Senegal","Cambodia","Zimbabwe","Guinea","Rwanda","Benin","Burundi","Tunisia","Bolivia","Belgium","Haiti","Jordan","Cuba","Dominican Republic","South Sudan","Czech Republic","Sweden","Azerbaijan","Greece","Honduras","Portugal","Papua New Guinea","Hungary","Tajikistan","Belarus","UAE","Israel","Austria","Togo","Switzerland","Sierra Leone","Lao","Serbia","Nicaragua","Libya","Bulgaria","Paraguay","Kyrgyz Republic","Turkmenistan","El Salvador","Singapore","Congo, Rep.","Denmark","Slovak Republic","Central African Republic","Finland","Lebanon","Norway","Liberia","Palestine","New Zealand","Costa Rica","Ireland","Mauritania","Oman","Panama","Kuwait","Croatia","Georgia","Eritrea","Uruguay","Mongolia","Moldova","Bosnia and Herzegovina","Albania","Jamaica","Armenia","Lithuania","Gambia","Qatar","Botswana","Namibia","Gabon","Lesotho","Slovenia","Guinea-Bissau","North Macedonia","Latvia","Equatorial Guinea","Trinidad and Tobago","Bahrain","Timor-Leste","Estonia","Mauritius","Cyprus","Eswatini","Djibouti","Fiji","Comoros","Guyana","Bhutan","Solomon Islands","Luxembourg","Montenegro","Suriname","Cape Verde","Malta","Maldives","Brunei","Bahamas","Belize","Iceland","Vanuatu","Barbados","Sao Tome and Principe","Samoa","St. Lucia","Kiribati","Grenada","Micronesia, Fed. Sts.","Seychelles","Tonga","St. Vincent and the Grenadines","Antigua and Barbuda","Andorra","Dominica","St. Kitts and Nevis","Marshall Islands","San Marino","Palau","Nauru","Tuvalu"],"mode":"markers","marker":{"color":["rgba(237,100,117,1)","rgba(237,100,117,1)","rgba(154,231,71,1)","rgba(237,100,117,1)","rgba(237,100,117,1)","rgba(95,210,230,1)","rgba(154,231,71,1)","rgba(237,100,117,1)","rgba(251,230,77,1)","rgba(154,231,71,1)","rgba(237,100,117,1)","rgba(95,210,230,1)","rgba(237,100,117,1)","rgba(95,210,230,1)","rgba(95,210,230,1)","rgba(237,100,117,1)","rgba(237,100,117,1)","rgba(251,230,77,1)","rgba(251,230,77,1)","rgba(237,100,117,1)","rgba(251,230,77,1)","rgba(95,210,230,1)","rgba(251,230,77,1)","rgba(95,210,230,1)","rgba(251,230,77,1)","rgba(237,100,117,1)","rgba(95,210,230,1)","rgba(154,231,71,1)","rgba(237,100,117,1)","rgba(251,230,77,1)","rgba(95,210,230,1)","rgba(95,210,230,1)","rgba(154,231,71,1)","rgba(95,210,230,1)","rgba(237,100,117,1)","rgba(237,100,117,1)","rgba(251,230,77,1)","rgba(251,230,77,1)","rgba(154,231,71,1)","rgba(95,210,230,1)","rgba(237,100,117,1)","rgba(95,210,230,1)","rgba(237,100,117,1)","rgba(154,231,71,1)","rgba(237,100,117,1)","rgba(237,100,117,1)","rgba(95,210,230,1)","rgba(95,210,230,1)","rgba(237,100,117,1)","rgba(95,210,230,1)","rgba(154,231,71,1)","rgba(95,210,230,1)","rgba(95,210,230,1)","rgba(237,100,117,1)","rgba(95,210,230,1)","rgba(237,100,117,1)","rgba(237,100,117,1)","rgba(95,210,230,1)","rgba(95,210,230,1)","rgba(237,100,117,1)","rgba(237,100,117,1)","rgba(95,210,230,1)","rgba(95,210,230,1)","rgba(251,230,77,1)","rgba(154,231,71,1)","rgba(237,100,117,1)","rgba(154,231,71,1)","rgba(154,231,71,1)","rgba(95,210,230,1)","rgba(251,230,77,1)","rgba(95,210,230,1)","rgba(95,210,230,1)","rgba(237,100,117,1)","rgba(95,210,230,1)","rgba(95,210,230,1)","rgba(95,210,230,1)","rgba(95,210,230,1)","rgba(95,210,230,1)","rgba(95,210,230,1)","rgba(154,231,71,1)","rgba(251,230,77,1)","rgba(154,231,71,1)","rgba(237,100,117,1)","rgba(154,231,71,1)","rgba(154,231,71,1)","rgba(95,210,230,1)","rgba(251,230,77,1)","rgba(251,230,77,1)","rgba(251,230,77,1)","rgba(251,230,77,1)","rgba(154,231,71,1)","rgba(251,230,77,1)","rgba(237,100,117,1)","rgba(251,230,77,1)","rgba(237,100,117,1)","rgba(251,230,77,1)","rgba(237,100,117,1)","rgba(237,100,117,1)","rgba(251,230,77,1)","rgba(95,210,230,1)","rgba(251,230,77,1)","rgba(95,210,230,1)","rgba(237,100,117,1)","rgba(251,230,77,1)","rgba(154,231,71,1)","rgba(95,210,230,1)","rgba(251,230,77,1)","rgba(154,231,71,1)","rgba(237,100,117,1)","rgba(237,100,117,1)","rgba(154,231,71,1)","rgba(237,100,117,1)","rgba(95,210,230,1)","rgba(251,230,77,1)","rgba(251,230,77,1)","rgba(95,210,230,1)","rgba(251,230,77,1)","rgba(237,100,117,1)","rgba(251,230,77,1)","rgba(95,210,230,1)","rgba(237,100,117,1)","rgba(237,100,117,1)","rgba(154,231,71,1)","rgba(251,230,77,1)","rgba(95,210,230,1)","rgba(237,100,117,1)","rgba(154,231,71,1)","rgba(237,100,117,1)","rgba(251,230,77,1)","rgba(251,230,77,1)","rgba(95,210,230,1)","rgba(154,231,71,1)","rgba(237,100,117,1)","rgba(251,230,77,1)","rgba(251,230,77,1)","rgba(251,230,77,1)","rgba(154,231,71,1)","rgba(251,230,77,1)","rgba(251,230,77,1)","rgba(95,210,230,1)","rgba(237,100,117,1)","rgba(95,210,230,1)","rgba(95,210,230,1)","rgba(95,210,230,1)","rgba(95,210,230,1)","rgba(251,230,77,1)","rgba(95,210,230,1)","rgba(251,230,77,1)","rgba(251,230,77,1)","rgba(95,210,230,1)","rgba(154,231,71,1)","rgba(237,100,117,1)","rgba(237,100,117,1)","rgba(251,230,77,1)","rgba(95,210,230,1)","rgba(251,230,77,1)","rgba(95,210,230,1)","rgba(95,210,230,1)","rgba(237,100,117,1)","rgba(95,210,230,1)","rgba(154,231,71,1)","rgba(237,100,117,1)","rgba(237,100,117,1)","rgba(251,230,77,1)","rgba(251,230,77,1)","rgba(154,231,71,1)","rgba(95,210,230,1)","rgba(251,230,77,1)","rgba(237,100,117,1)","rgba(237,100,117,1)","rgba(154,231,71,1)","rgba(154,231,71,1)","rgba(251,230,77,1)","rgba(237,100,117,1)","rgba(154,231,71,1)","rgba(95,210,230,1)","rgba(237,100,117,1)","rgba(154,231,71,1)","rgba(237,100,117,1)","rgba(154,231,71,1)","rgba(237,100,117,1)","rgba(95,210,230,1)","rgba(237,100,117,1)","rgba(154,231,71,1)","rgba(154,231,71,1)","rgba(251,230,77,1)","rgba(154,231,71,1)","rgba(154,231,71,1)","rgba(237,100,117,1)","rgba(251,230,77,1)","rgba(237,100,117,1)","rgba(237,100,117,1)","rgba(237,100,117,1)"],"size":[69.241050590693263,68.999224801834316,33.76585566713095,30.531501776206202,28.247578623950172,27.218512172212591,26.970630673681683,24.074672772626645,22.184843263788199,20.855911179772889,20.530600909302539,20.448456731316586,19.8638416050035,19.435384061671343,18.365902124584949,18.292355660149212,17.385265006200321,17.062186493255652,16.873332000533065,15.659624833740306,15.199999999999999,14.976106839534333,14.874240468703425,14.330345596151094,14.223789311975086,13.6412301024373,13.616407864998738,13.352946437965905,13.340268896284682,12.796295751794121,12.743258481484519,12.703332889007367,12.515302134607444,12.43383286900171,12.379217270963407,11.904699910719625,11.732562594670796,11.703622617824932,11.528430311977619,11.380339887498948,11.215141094572203,11.093423092245461,10.939335795724674,10.84581294844754,10.830145812734649,10.798742063723097,10.767244989431571,10.688088481701515,10.282988974836115,10.133109617167559,9.9125348562223099,9.895359714832658,9.8436507609929542,9.5452305125841228,9.5452305125841228,9.5273790530888149,9.1256185593305883,8.8986589004665912,8.879477710861023,8.782928793055822,8.7244745683629468,8.4462112512353205,8.3649658092772601,8.3034971874288122,8.2829037686547604,8.2415587212098789,7.9459666924148342,7.9028133388608959,7.881145747868608,7.859416862050705,7.859416862050705,7.7938571665963448,7.6833147735478828,7.5711147958319938,7.0068592855540457,6.9823299831252683,6.8833125519211409,6.7574385243020005,6.6291005073286371,6.5770421565696635,6.4449979983983985,6.4182527020592097,6.3373175465073226,6.3101009266077872,6.3101009266077872,6.2277137733417085,6.1160797830996163,6.1160797830996163,6.0878405775518978,6.0878405775518978,6.0878405775518978,6.0594652770823156,6.0022983951764033,5.9648359329067935,5.959050847723665,5.8361925682739644,5.8095157247900344,5.6893836933970405,5.6589376255824728,5.6313902456001079,5.5975302994363387,5.5572380943915496,5.2099900199501397,5.1057789051960611,5.0131763593978844,4.9644516998286381,4.9539457296018856,4.9539457296018856,4.9010637094172633,4.8296148147911113,4.7971005354824836,4.664676173400859,4.6609416046390928,4.6271887242357312,4.5358966777357601,4.5127717305695656,4.4972859651955517,4.477849927241488,4.4544094772365295,4.4031734043061643,4.383300132670378,4.3593268686170843,4.355317877932646,4.2906397217713188,4.174921382870358,4.1072582032246947,4.0340579025361629,3.9727090178455766,3.8651512019742569,3.7308167138307629,3.7023801430836527,3.5763886032268268,3.5665016461206931,3.5015148038438357,3.481259920619924,3.2767948691238207,3.2713731999438518,3.2441200151549001,3.2276503540974919,3.205550421026627,3.2000000000000002,3.1608557321603272,3.1268868558020255,3.0225284173355398,2.9748873851023219,2.8583202716502516,2.8520432374554781,2.8394443859772207,2.6832774042918901,2.5593784492248521,2.458317958127243,2.4135943621178657,2.3134489978863146,2.3055482263138343,2.2816659994661328,2.2412414523193154,2.2000000000000002,2.1321835661585919,1.9606816861659009,1.8703293088490065,1.8421530582338135,1.8145174717749779,1.7534906930308058,1.6696938456699069,1.645683229480096,1.6352700094407324,1.6059397805975426,1.5329166015421469,1.5216151734399339,1.4233832869001712,1.3690451944500122,1.3618950038622251,1.3150485789118487,1.244030650891055,1.1695359714832658,1.0698658900466593,1.0602325267042627,0.97459666924148336,0.86080758671996693,0.84549722436790287,0.8164414002968976,0.79721576223896395,0.79721576223896395,0.78878405775518989,0.75916604570258617,0.71575187832910503,0.69227363664260277,0.59874804074753774,0.57237973450050506,0.53516165253998449,0.44562844569254056,0.40575065816014622,0.39407902170679521],"opacity":0.80000000000000004,"line":{"color":"rgba(31,119,180,1)"}},"type":"scatter","error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>